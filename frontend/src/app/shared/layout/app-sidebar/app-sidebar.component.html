<aside
  class="fixed flex flex-col top-0 px-5 left-0 bg-gradient-to-b from-primary to-primary-800 dark:from-gray-900 dark:to-gray-950 text-white h-screen transition-all duration-300 ease-in-out z-50 border-r border-primary-700 dark:border-gray-800 shadow-xl"
  [ngClass]="{
    'w-[290px]': (isExpanded$ | async) || (isMobileOpen$ | async) || (isHovered$ | async),
    'w-[90px]': !((isExpanded$ | async) || (isMobileOpen$ | async) || (isHovered$ | async)),
    'translate-x-0': isMobileOpen$ | async,
    '-translate-x-full': !(isMobileOpen$ | async),
    'xl:translate-x-0': true
  }"
  (mouseenter)="onSidebarMouseEnter()"
  (mouseleave)="sidebarService.setHovered(false)">
  
  <div class="py-6 flex justify-start">
    <a routerLink="/" class="flex items-center">
      @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
      <img class="h-20 w-auto" src="/images/logo/jungle-in-english-removebg-preview.png" alt="Logo" />
      } @else {
      <img src="/images/logo/jungle-in-english-removebg-preview.png" alt="Logo" class="w-16 h-16 object-contain" />
      }
    </a>
  </div>

  <div class="flex flex-col overflow-y-auto duration-300 ease-linear no-scrollbar">
    <nav class="mb-6">
      <div class="flex flex-col gap-6">
        
        <!-- OVERVIEW - Tous -->
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { üìä OVERVIEW } @else { üìä }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of overviewItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>

        <!-- USER MANAGEMENT - ADMIN -->
        @if (currentUserRole === 'ADMIN') {
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { üë• USER MANAGEMENT } @else { üë• }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of adminUserManagementItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>

        <!-- STATISTICS - ADMIN -->
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { üìà STATISTICS } @else { üìà }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of adminStatisticsItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>
        }

        <!-- SCHEDULE - ACADEMIC_OFFICE_AFFAIR -->
        @if (currentUserRole === 'ACADEMIC_OFFICE_AFFAIR') {
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { üìÖ SCHEDULE } @else { üìÖ }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of academicScheduleItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>

        <!-- FINANCIAL - ACADEMIC_OFFICE_AFFAIR -->
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { üí∞ FINANCIAL } @else { üí∞ }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of academicFinancialItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>

        <!-- CLUBS & EVENTS - ACADEMIC_OFFICE_AFFAIR -->
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { üéØ CLUBS & EVENTS } @else { üéØ }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of academicClubsEventsItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>

        <!-- FEEDBACK - ACADEMIC_OFFICE_AFFAIR -->
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { üìù FEEDBACK } @else { üìù }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of academicFeedbackItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>
        }

        <!-- FORUM MANAGEMENT - ADMIN et ACADEMIC_OFFICE_AFFAIR -->
        @if (currentUserRole === 'ADMIN' || currentUserRole === 'ACADEMIC_OFFICE_AFFAIR') {
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { üí¨ FORUM } @else { üí¨ }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of forumManagementItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>
        }

        <!-- SYSTEM - Tous -->
        <div>
          <h2 class="mb-3 text-xs font-semibold text-[#F6BD60]">
            @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) { ‚öôÔ∏è SYSTEM } @else { ‚öôÔ∏è }
          </h2>
          <ul class="flex flex-col gap-1">
            @for (nav of systemItems; track $index) {
            <li>
              <a [routerLink]="nav.path" routerLinkActive="menu-item-active" class="menu-item group" [ngClass]="{ 'menu-item-inactive': !isActive(nav.path!) }">
                <span class="menu-item-icon-size" [innerHTML]="nav.icon | safeHtml"></span>
                @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
                <span class="menu-item-text">{{ nav.name }}</span>
                }
              </a>
            </li>
            }
          </ul>
        </div>

      </div>
    </nav>
    @if ((isExpanded$ | async) || (isHovered$ | async) || (isMobileOpen$ | async)) {
    <app-sidebar-widget />
    }
  </div>
</aside>
