<aside
  (mouseenter)="onSidebarMouseEnter()"
  (mouseleave)="sidebarService.setHovered(false)"
  class="fixed left-0 top-0 z-50 h-screen flex flex-col overflow-y-hidden bg-gradient-to-b from-[#2D5757] to-[#3D3D60] transition-all duration-300 ease-linear"
  [ngClass]="{
    'translate-x-0': (isMobileOpen$ | async),
    '-translate-x-full xl:translate-x-0': !(isMobileOpen$ | async),
    'w-[280px]': (isExpanded$ | async) || (isHovered$ | async),
    'w-[80px]': !(isExpanded$ | async) && !(isHovered$ | async)
  }"
>
  <!-- SIDEBAR HEADER -->
  <div class="flex items-center justify-between gap-2 px-6 py-5.5">
    <a routerLink="/" class="flex items-center gap-3">
      <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-[#F6BD60]">
        <span class="text-2xl">ðŸŽ“</span>
      </div>
      <span
        *ngIf="(isExpanded$ | async) || (isHovered$ | async)"
        class="text-xl font-bold text-white"
      >
        Jungle English
      </span>
    </a>

    <button
      (click)="sidebarService.toggleExpanded()"
      class="hidden xl:block rounded-lg p-1.5 hover:bg-white/10"
      *ngIf="(isExpanded$ | async) || (isHovered$ | async)"
    >
      <svg class="h-5 w-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path>
      </svg>
    </button>
  </div>

  <!-- SIDEBAR MENU -->
  <div class="no-scrollbar flex flex-col overflow-y-auto duration-300 ease-linear">
    <nav class="px-4 py-4">
      <!-- Main Menu Group -->
      <div>
        <h3
          *ngIf="(isExpanded$ | async) || (isHovered$ | async)"
          class="mb-4 ml-4 text-sm font-semibold text-gray-300"
        >
          MENU
        </h3>

        <ul class="mb-6 flex flex-col gap-1.5">
          <li *ngFor="let item of navItems">
            <a
              [routerLink]="item.path"
              routerLinkActive="bg-white/10 text-white"
              class="group relative flex items-center gap-2.5 rounded-lg px-4 py-2.5 font-medium text-gray-200 duration-300 ease-in-out hover:bg-white/10 hover:text-white"
            >
              <span class="text-xl" [innerHTML]="item.icon | safeHtml"></span>
              <span *ngIf="(isExpanded$ | async) || (isHovered$ | async)">
                {{ item.name }}
              </span>
              
              <!-- Badge -->
              <span
                *ngIf="item.badge && ((isExpanded$ | async) || (isHovered$ | async))"
                class="ml-auto rounded-full px-2 py-0.5 text-xs font-semibold text-white"
                [ngClass]="item.badgeColor || 'bg-red-500'"
              >
                {{ item.badge }}
              </span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Support & Settings Group -->
      <div>
        <h3
          *ngIf="(isExpanded$ | async) || (isHovered$ | async)"
          class="mb-4 ml-4 text-sm font-semibold text-gray-300"
        >
          SUPPORT
        </h3>

        <ul class="mb-6 flex flex-col gap-1.5">
          <li *ngFor="let item of othersItems">
            <a
              [routerLink]="item.path"
              routerLinkActive="bg-white/10 text-white"
              class="group relative flex items-center gap-2.5 rounded-lg px-4 py-2.5 font-medium text-gray-200 duration-300 ease-in-out hover:bg-white/10 hover:text-white"
            >
              <span class="text-xl" [innerHTML]="item.icon | safeHtml"></span>
              <span *ngIf="(isExpanded$ | async) || (isHovered$ | async)">
                {{ item.name }}
              </span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>

  <!-- Logout Button -->
  <div class="mt-auto border-t border-white/10 p-4">
    <button
      class="group relative flex w-full items-center gap-2.5 rounded-lg px-4 py-2.5 font-medium text-gray-200 duration-300 ease-in-out hover:bg-red-500/20 hover:text-red-400"
    >
      <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
      </svg>
      <span *ngIf="(isExpanded$ | async) || (isHovered$ | async)">
        Logout
      </span>
    </button>
  </div>
</aside>
