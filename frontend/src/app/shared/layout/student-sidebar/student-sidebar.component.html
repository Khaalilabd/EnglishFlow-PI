<aside 
  (mouseenter)="onSidebarMouseEnter()"
  (mouseleave)="sidebarService.setHovered(false)"
  [ngClass]="{
    'translate-x-0': (isMobileOpen$ | async),
    '-translate-x-full xl:translate-x-0': !(isMobileOpen$ | async),
    'w-72': (isExpanded$ | async) || (isHovered$ | async),
    'w-20': !(isExpanded$ | async) && !(isHovered$ | async)
  }"
  class="fixed left-0 top-0 h-screen bg-gradient-to-b from-[#2D5757] via-[#3D6D6D] to-[#2D5757] text-white transition-all duration-300 ease-in-out shadow-2xl z-50 flex flex-col">
  
  <!-- Header with Logo -->
  <div class="p-6 border-b border-white/10">
    <div class="flex items-center justify-between">
      <div [class]="((isExpanded$ | async) || (isHovered$ | async)) ? 'flex items-center space-x-3' : 'hidden'">
        <div class="w-10 h-10 bg-gradient-to-br from-[#F6BD60] to-[#C84630] rounded-lg flex items-center justify-center shadow-lg">
          <i class="fas fa-graduation-cap text-white text-xl"></i>
        </div>
        <div>
          <h1 class="text-xl font-bold text-[#F7EDE2]">Student Panel</h1>
          <p class="text-xs text-[#F7EDE2]/80">Jungle in English</p>
        </div>
      </div>
      <button 
        (click)="sidebarService.toggleExpanded()"
        class="p-2 hover:bg-white/10 rounded-lg transition-colors">
        <i [class]="((isExpanded$ | async) || (isHovered$ | async)) ? 'fas fa-chevron-left text-[#F7EDE2]' : 'fas fa-chevron-right text-[#F7EDE2]'"></i>
      </button>
    </div>
  </div>

  <!-- Scrollable Menu Section -->
  <div class="flex-1 overflow-y-auto py-6 px-3 space-y-1 scrollbar-thin scrollbar-thumb-[#F6BD60] scrollbar-track-white/10">
    <!-- Main Menu Items -->
    <div class="space-y-1">
      <div *ngIf="(isExpanded$ | async) || (isHovered$ | async)" class="px-3 mb-3">
        <p class="text-xs font-semibold text-[#F7EDE2]/70 uppercase tracking-wider">Menu</p>
      </div>
      
      <a 
        *ngFor="let item of navItems"
        [routerLink]="item.path"
        routerLinkActive="bg-[#F6BD60]/20 shadow-lg border-l-4 border-[#F6BD60]"
        #rla="routerLinkActive"
        class="flex items-center px-4 py-3 rounded-xl hover:bg-white/10 transition-all duration-200 group relative"
        [title]="!(isExpanded$ | async) && !(isHovered$ | async) ? item.name : ''">
        
        <i [class]="item.icon + ' text-lg w-6 transition-colors ' + (rla.isActive ? 'text-[#F6BD60]' : 'text-[#F7EDE2]/80')"></i>
        
        <span 
          *ngIf="(isExpanded$ | async) || (isHovered$ | async)" 
          class="ml-4 font-medium transition-colors"
          [ngClass]="rla.isActive ? 'text-[#F7EDE2]' : 'text-[#F7EDE2]/90'">
          {{ item.name }}
        </span>
        
        <span *ngIf="item.badge && ((isExpanded$ | async) || (isHovered$ | async))" class="ml-auto bg-[#F6BD60] text-[#2D5757] text-xs font-bold px-2 py-1 rounded-full shadow-lg">{{ item.badge }}</span>
        
        <span *ngIf="item.badge && !(isExpanded$ | async) && !(isHovered$ | async)" class="absolute -top-1 -right-1 bg-[#F6BD60] text-[#2D5757] text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center shadow-lg">{{ item.badge }}</span>
      </a>
    </div>

    <!-- Support Section -->
    <div class="pt-6 mt-6 border-t border-white/10 space-y-1">
      <div *ngIf="(isExpanded$ | async) || (isHovered$ | async)" class="px-3 mb-3">
        <p class="text-xs font-semibold text-[#F7EDE2]/70 uppercase tracking-wider">Support</p>
      </div>
      
      <a 
        *ngFor="let item of othersItems"
        [routerLink]="item.path"
        routerLinkActive="bg-[#F6BD60]/20 shadow-lg border-l-4 border-[#F6BD60]"
        #rla2="routerLinkActive"
        class="flex items-center px-4 py-3 rounded-xl hover:bg-white/10 transition-all duration-200"
        [title]="!(isExpanded$ | async) && !(isHovered$ | async) ? item.name : ''">
        
        <i [class]="item.icon + ' text-lg w-6 transition-colors ' + (rla2.isActive ? 'text-[#F6BD60]' : 'text-[#F7EDE2]/80')"></i>
        
        <span 
          *ngIf="(isExpanded$ | async) || (isHovered$ | async)" 
          class="ml-4 font-medium"
          [ngClass]="rla2.isActive ? 'text-[#F7EDE2]' : 'text-[#F7EDE2]/90'">
          {{ item.name }}
        </span>
      </a>
    </div>
  </div>

  <!-- Footer -->
  <div class="p-4 border-t border-white/10">
    <div *ngIf="(isExpanded$ | async) || (isHovered$ | async)" class="bg-white/10 rounded-xl p-4 backdrop-blur-sm mb-3">
      <div class="flex items-center space-x-3 mb-3">
        <div class="w-10 h-10 bg-gradient-to-br from-[#F6BD60] to-[#C84630] rounded-full flex items-center justify-center shadow-lg">
          <i class="fas fa-graduation-cap text-white"></i>
        </div>
        <div class="flex-1">
          <p class="text-sm font-semibold text-[#F7EDE2]">Need Help?</p>
          <p class="text-xs text-[#F7EDE2]/80">Contact support</p>
        </div>
      </div>
      <button class="w-full bg-gradient-to-r from-[#F6BD60] to-[#C84630] hover:from-[#C84630] hover:to-[#F6BD60] text-white text-sm font-medium py-2 px-4 rounded-lg transition-all duration-200 shadow-lg">
        Get Support
      </button>
    </div>
    
    <button 
      *ngIf="!(isExpanded$ | async) && !(isHovered$ | async)"
      class="w-full p-3 bg-white/10 rounded-xl hover:bg-white/20 transition-colors mb-3"
      title="Get Support">
      <i class="fas fa-question-circle text-[#F6BD60]"></i>
    </button>

    <!-- Logout Button -->
    <button class="w-full flex items-center px-4 py-3 rounded-xl hover:bg-red-500/20 text-[#F7EDE2]/90 hover:text-red-400 transition-all duration-200">
      <i class="fas fa-sign-out-alt text-lg w-6"></i>
      <span *ngIf="(isExpanded$ | async) || (isHovered$ | async)" class="ml-4 font-medium">Logout</span>
    </button>
  </div>
</aside>
