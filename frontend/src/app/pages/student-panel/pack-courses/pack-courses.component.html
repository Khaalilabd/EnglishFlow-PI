<div class="pack-courses-container">
  <!-- Header -->
  <div class="courses-header">
    <button class="back-btn" (click)="goBack()">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
      </svg>
      Back to My Packs
    </button>

    @if (pack) {
      <div class="pack-info">
        <h1 class="pack-title">{{ pack.name }}</h1>
        <div class="pack-meta">
          <span class="meta-item">{{ pack.category }}</span>
          <span class="meta-divider">â€¢</span>
          <span class="meta-item">{{ pack.level }}</span>
          <span class="meta-divider">â€¢</span>
          <span class="meta-item">{{ pack.tutorName }}</span>
        </div>
      </div>
    }

    @if (enrollment) {
      <div class="progress-card">
        <div class="progress-info">
          <span class="progress-label">Your Progress</span>
          <span class="progress-percentage">{{ enrollment.progressPercentage }}%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="enrollment.progressPercentage"></div>
        </div>
        <div class="progress-stats">
          <span>{{ enrollment.completedCourses }} / {{ enrollment.totalCourses }} courses completed</span>
        </div>
      </div>
    }
  </div>

  <!-- Loading State -->
  @if (loading) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading courses...</p>
    </div>
  }

  <!-- Courses Grid -->
  @if (!loading && courses.length > 0) {
    <div class="courses-grid">
      @for (course of courses; track course.id) {
        <div class="course-card" (click)="startCourse(course)">
          <div class="course-thumbnail">
            @if (course.thumbnailUrl) {
              <img [src]="course.thumbnailUrl" [alt]="course.title">
            } @else {
              <div class="thumbnail-placeholder">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
              </div>
            }
            <div class="course-overlay">
              <span class="course-level">{{ course.level }}</span>
            </div>
          </div>

          <div class="course-content">
            <h3 class="course-title">{{ course.title }}</h3>
            
            @if (course.description) {
              <p class="course-description">{{ course.description }}</p>
            }

            <div class="course-stats">
              <div class="stat-item">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <span>{{ course.chapterCount || 0 }} Chapters</span>
              </div>
              <div class="stat-item">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                </svg>
                <span>{{ course.lessonCount || 0 }} Lessons</span>
              </div>
              @if (course.duration) {
                <div class="stat-item">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  <span>{{ course.duration }}h</span>
                </div>
              }
            </div>

            <!-- Progress Bar -->
            <div class="course-progress">
              <div class="progress-bar-small">
                <div class="progress-fill-small" [style.width.%]="getCourseProgress(course.id!)"></div>
              </div>
              <span class="progress-text">{{ getCourseProgress(course.id!) }}%</span>
            </div>

            <button class="btn-start">
              @if (getCourseProgress(course.id!) > 0) {
                <span>Continue Learning</span>
              } @else {
                <span>Start Course</span>
              }
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </button>
          </div>
        </div>
      }
    </div>
  }

  <!-- Empty State -->
  @if (!loading && courses.length === 0) {
    <div class="empty-state">
      <div class="empty-icon">ðŸ“š</div>
      <h3>No Courses Available</h3>
      <p>This pack doesn't have any courses yet.</p>
      <button class="btn-primary" (click)="goBack()">Back to My Packs</button>
    </div>
  }
</div>
