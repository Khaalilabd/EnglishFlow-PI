<!-- ***** Header Area Start ***** -->
<header class="modern-header">
  <nav class="modern-nav">
    <div class="nav-container">
      <!-- Logo -->
      <a routerLink="/" class="nav-logo">
        <img src="/images/logo/jungle-in-english-removebg-preview.png" alt="Jungle in English" class="logo-img">
        <span class="logo-text">JUNGLE IN ENGLISH</span>
      </a>

      <!-- Desktop Navigation -->
      <div class="nav-menu" [class.active]="mobileMenuOpen">
        <ul class="nav-links">
          <li><a routerLink="/" class="nav-link">Home</a></li>
          <li><a href="/#services" class="nav-link">Services</a></li>
          <li><a href="/#courses" class="nav-link">Courses</a></li>
          <li><a routerLink="/clubs" class="nav-link active">Clubs</a></li>
          <li><a href="/#team" class="nav-link">Team</a></li>
          <li><a href="/#events" class="nav-link">Events</a></li>
          <li><a href="/#contact" class="nav-link">Contact</a></li>
        </ul>

        <!-- Auth Buttons / User Menu -->
        <div class="nav-actions">
          @if (!authService.isAuthenticated) {
            <!-- Guest Actions -->
            <a routerLink="/login" class="btn-login">Login</a>
            <a routerLink="/register" class="btn-register">Get Started</a>
          } @else {
            <!-- Authenticated User Actions -->
            <div class="nav-user-section">
              <app-frontoffice-notification-dropdown />
              <app-frontoffice-user-dropdown />
            </div>
          }
        </div>
      </div>

      <!-- Mobile Menu Toggle -->
      <button class="mobile-toggle" (click)="toggleMobileMenu()" [class.active]="mobileMenuOpen">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<!-- ***** Header Area End ***** -->

<!-- ***** Clubs Section Start ***** -->
<section class="clubs-public-section">
  <div class="section-container">
    <!-- Hero Header -->
    <div class="clubs-hero">
      <div class="clubs-hero-grid">
        <!-- Left Content -->
        <div class="hero-content-side">
          <span class="section-badge">
            <svg class="badge-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
            Clubs Anglais
          </span>
          
          <h1 class="clubs-hero-title">
            Join our learning
            <span class="title-highlight">clubs</span>
          </h1>
          
          <p class="clubs-hero-description">
            Connect with other learners, practice English and improve your skills in a friendly community.
          </p>
          
          <div class="hero-stats">
            <div class="stat-box">
              <div class="stat-number">{{ allClubs.length }}+</div>
              <div class="stat-label">Active Clubs</div>
            </div>
            <div class="stat-box">
              <div class="stat-number">12</div>
              <div class="stat-label">Categories</div>
            </div>
          </div>
          
          <a routerLink="/register" class="btn-hero-primary">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
            </svg>
            Commencer maintenant
          </a>
        </div>

        <!-- Right Visual Grid -->
        <div class="hero-visual-side">
          <div class="visual-grid">
            <div class="visual-card card-1">
              <div class="card-icon">üí¨</div>
              <div class="card-title">Conversation</div>
            </div>
            <div class="visual-card card-2">
              <div class="card-icon">üìö</div>
              <div class="card-title">Book Club</div>
            </div>
            <div class="visual-card card-3">
              <div class="card-icon">üé≠</div>
              <div class="card-title">Drama</div>
            </div>
            <div class="visual-card card-4">
              <div class="card-icon">‚úçÔ∏è</div>
              <div class="card-title">Writing</div>
            </div>
            <div class="visual-card card-5">
              <div class="card-icon">üéì</div>
              <div class="card-title">Academic</div>
            </div>
            <div class="visual-card card-6">
              <div class="card-icon">üíº</div>
              <div class="card-title">Business</div>
            </div>
          </div>
          
          <!-- Decorative Elements -->
          <div class="floating-shape shape-1"></div>
          <div class="floating-shape shape-2"></div>
          <div class="floating-shape shape-3"></div>
        </div>
      </div>
    </div>

    <!-- Filter Section -->
    <div class="clubs-filter-section">
      <div class="filter-header">
        <h2 class="filter-title">Explore Clubs</h2>
        
        <!-- Dropdown Filter -->
        <div class="filter-dropdown-container">
          <button class="filter-dropdown-btn" (click)="toggleDropdown()">
            <span class="dropdown-label">
              @if (selectedCategory === null) {
                <span class="dropdown-icon">üåü</span>
                <span>All Clubs</span>
              } @else {
                <span class="dropdown-icon">{{ getCategoryIcon(selectedCategory) }}</span>
                <span>{{ getCategoryLabel(selectedCategory) }}</span>
              }
            </span>
            <svg class="dropdown-arrow" [class.rotate]="dropdownOpen" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          @if (dropdownOpen) {
            <div class="filter-dropdown-menu">
              <button
                class="dropdown-item"
                [class.active]="selectedCategory === null"
                (click)="filterByCategory(null)"
              >
                <span class="dropdown-icon">üåü</span>
                <span>All Clubs</span>
                @if (selectedCategory === null) {
                  <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                }
              </button>
              @for (cat of categories; track cat) {
                <button
                  class="dropdown-item"
                  [class.active]="selectedCategory === cat"
                  (click)="filterByCategory(cat)"
                >
                  <span class="dropdown-icon">{{ getCategoryIcon(cat) }}</span>
                  <span>{{ getCategoryLabel(cat) }}</span>
                  @if (selectedCategory === cat) {
                    <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                  }
                </button>
              }
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Loading State -->
    @if (loading) {
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Loading clubs...</p>
      </div>
    } @else if (error) {
      <div class="error-state">
        <svg class="error-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p>{{ error }}</p>
        <button (click)="loadClubs()" class="btn-retry">Try Again</button>
      </div>
    } @else {
      <!-- Clubs Grid -->
      @if (filteredClubs.length > 0) {
        <div class="clubs-grid">
          @for (club of filteredClubs; track club.id) {
            <div class="club-card" [class.opacity-60]="club.status === 'SUSPENDED'" [class.pointer-events-none]="club.status === 'SUSPENDED'">
              <!-- Suspended Badge -->
              @if (club.status === 'SUSPENDED') {
                <div class="absolute top-4 right-4 z-10">
                  <span class="px-3 py-1 bg-red-600 text-white text-xs font-bold rounded-full shadow-lg">
                    üö´ SUSPENDED
                  </span>
                </div>
              }
              
              <!-- Club Image Header -->
              <div class="club-image-header" [class.grayscale]="club.status === 'SUSPENDED'">
                @if (club.image) {
                  <div class="club-image-container">
                    <img 
                      [src]="club.image" 
                      [alt]="club.name" 
                      class="club-image-cover"
                      loading="lazy"
                    />
                    <div class="image-overlay"></div>
                  </div>
                } @else {
                  <div class="club-image-placeholder-header">
                    <span class="placeholder-icon-large">{{ getCategoryIcon(club.category) }}</span>
                  </div>
                }
                <!-- Category Badge on Image -->
                <div class="absolute top-4 left-4">
                  <span class="club-category-badge-overlay">
                    {{ getCategoryIcon(club.category) }} {{ getCategoryLabel(club.category) }}
                  </span>
                </div>
              </div>

              <!-- Club Body -->
              <div class="club-body">
                <h3 class="club-title tracking-tight">{{ club.name }}</h3>
                <p class="club-description tracking-tight">{{ club.description }}</p>

                <!-- Actions -->
                <div class="club-actions">
                  @if (club.status === 'SUSPENDED') {
                    <button disabled class="action-btn-details opacity-50 cursor-not-allowed" style="width: 100%;">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path>
                      </svg>
                      Unavailable
                    </button>
                  } @else {
                    <button (click)="showClubDetails(club)" class="action-btn-details" style="width: 100%;">
                      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                      </svg>
                      Voir les d√©tails
                    </button>
                  }
                </div>
              </div>
            </div>
          }
        </div>
      } @else {
        <div class="empty-state">
          <span class="empty-icon">{{ selectedCategory ? getCategoryIcon(selectedCategory) : 'üìö' }}</span>
          <h3 class="empty-title">
            @if (selectedCategory) {
              No {{ selectedCategory }} clubs available
            } @else {
              No clubs available yet
            }
          </h3>
          <p class="empty-description">
            @if (selectedCategory) {
              Try selecting a different category or check back later.
            } @else {
              Be the first to create a club! Sign up to get started.
            }
          </p>
          @if (selectedCategory) {
            <button (click)="filterByCategory(null)" class="btn-view-all">View All Clubs</button>
          } @else {
            <a routerLink="/register" class="btn-get-started">Get Started</a>
          }
        </div>
      }
    }

    <!-- CTA Section -->
    <div class="clubs-cta">
      <div class="cta-content">
        <h2 class="cta-title">Ready to Join a Club?</h2>
        <p class="cta-description">Create an account to join clubs and start practicing English with other learners.</p>
        <div class="cta-buttons">
          <a routerLink="/register" class="btn-cta-primary">Create Account</a>
          <a routerLink="/login" class="btn-cta-secondary">Sign In</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Club Details Modal -->
@if (showDetailsModal && selectedClub) {
  <div class="modal-overlay" (click)="closeDetailsModal()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <!-- Modal Header -->
      <div class="modal-header">
        <h2 class="modal-title">{{ selectedClub.name }}</h2>
        <button (click)="closeDetailsModal()" class="modal-close-btn">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <!-- Club Image -->
        @if (selectedClub.image) {
          <div class="modal-image-container">
            <img [src]="selectedClub.image" [alt]="selectedClub.name" class="modal-image" />
          </div>
        } @else {
          <div class="modal-image-placeholder">
            <span class="modal-placeholder-icon">{{ getCategoryIcon(selectedClub.category) }}</span>
          </div>
        }

        <!-- Club Info -->
        <div class="modal-info-section">
          <div class="modal-info-item">
            <h3 class="modal-info-label">
              <svg class="modal-info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
              </svg>
              Category
            </h3>
            <p class="modal-info-value">
              <span class="modal-category-badge">
                {{ getCategoryIcon(selectedClub.category) }} {{ getCategoryLabel(selectedClub.category) }}
              </span>
            </p>
          </div>

          <div class="modal-info-item">
            <h3 class="modal-info-label">
              <svg class="modal-info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
              Description
            </h3>
            <p class="modal-info-value">{{ selectedClub.description }}</p>
          </div>

          @if (selectedClub.objective) {
            <div class="modal-info-item">
              <h3 class="modal-info-label">
                <svg class="modal-info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                </svg>
                Objective
              </h3>
              <p class="modal-info-value">{{ selectedClub.objective }}</p>
            </div>
          }
        </div>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer">
        <button (click)="closeDetailsModal()" class="modal-btn-primary" style="width: 100%;">
          Close
        </button>
      </div>
    </div>
  </div>
}

<!-- ***** Clubs Section End ***** -->

<!-- ***** Footer Start ***** -->
<footer class="modern-footer">
  <div class="footer-container">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="/images/logo/jungle-in-english-removebg-preview.png" alt="Jungle in English" class="footer-logo">
        <p class="footer-description">
          Empowering students to master English through innovative teaching methods and expert guidance.
        </p>
      </div>

      <div class="footer-links">
        <div class="footer-column">
          <h4>Quick Links</h4>
          <ul>
            <li><a routerLink="/">Home</a></li>
            <li><a routerLink="/clubs">Clubs</a></li>
            <li><a routerLink="/register">Join Now</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2026 Jungle in English. All rights reserved.</p>
    </div>
  </div>
</footer>
<!-- ***** Footer End ***** -->
