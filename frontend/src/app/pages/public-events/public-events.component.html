<!-- ***** Header Area Start ***** -->
<header class="modern-header">
  <nav class="modern-nav">
    <div class="nav-container">
      <!-- Logo -->
      <a routerLink="/" class="nav-logo">
        <img src="/images/logo/jungle-in-english-removebg-preview.png" alt="Jungle in English" class="logo-img">
        <span class="logo-text">JUNGLE IN ENGLISH</span>
      </a>

      <!-- Desktop Navigation -->
      <div class="nav-menu" [class.active]="mobileMenuOpen">
        <ul class="nav-links">
          <li><a routerLink="/" class="nav-link">Home</a></li>
          <li><a href="/#services" class="nav-link">Services</a></li>
          <li><a href="/#courses" class="nav-link">Courses</a></li>
          <li><a routerLink="/clubs" class="nav-link">Clubs</a></li>
          <li><a href="/#team" class="nav-link">Team</a></li>
          <li><a routerLink="/events" class="nav-link active">Events</a></li>
          <li><a href="/#contact" class="nav-link">Contact</a></li>
        </ul>

        <!-- Auth Buttons / User Menu -->
        <div class="nav-actions">
          @if (!authService.isAuthenticated) {
            <!-- Guest Actions -->
            <a routerLink="/login" class="btn-login">Login</a>
            <a routerLink="/register" class="btn-register">Get Started</a>
          } @else {
            <!-- Authenticated User Actions -->
            <div class="nav-user-section">
              <app-frontoffice-notification-dropdown />
              <app-frontoffice-user-dropdown />
            </div>
          }
        </div>
      </div>

      <!-- Mobile Menu Toggle -->
      <button class="mobile-toggle" (click)="toggleMobileMenu()" [class.active]="mobileMenuOpen">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<!-- ***** Header Area End ***** -->

<!-- ***** Events Section Start ***** -->
<section class="events-public-section">
  <div class="section-container">
    <!-- Hero Slider - Full Width -->
    <div class="events-hero-slider">
      <app-event-slider [slides]="sliderData"></app-event-slider>
    </div>

    <!-- Filter Section -->
    <div class="events-filter-section">
      <div class="filter-header">
        <h2 class="filter-title">Explore Events</h2>
        
        <!-- Dropdown Filter -->
        <div class="filter-dropdown-container">
          <button class="filter-dropdown-btn" (click)="toggleDropdown()">
            <span class="dropdown-label">
              @if (selectedType === null) {
                <span class="dropdown-icon">ðŸŒŸ</span>
                <span>All Events</span>
              } @else {
                <span class="dropdown-icon">{{ getTypeIcon(selectedType) }}</span>
                <span>{{ getTypeLabel(selectedType) }}</span>
              }
            </span>
            <svg class="dropdown-arrow" [class.rotate]="dropdownOpen" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          @if (dropdownOpen) {
            <div class="filter-dropdown-menu">
              <button
                class="dropdown-item"
                [class.active]="selectedType === null"
                (click)="filterByType(null)"
              >
                <span class="dropdown-icon">ðŸŒŸ</span>
                <span>All Events</span>
                @if (selectedType === null) {
                  <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                }
              </button>
              @for (type of eventTypes; track type) {
                <button
                  class="dropdown-item"
                  [class.active]="selectedType === type"
                  (click)="filterByType(type)"
                >
                  <span class="dropdown-icon">{{ getTypeIcon(type) }}</span>
                  <span>{{ getTypeLabel(type) }}</span>
                  @if (selectedType === type) {
                    <svg class="check-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                  }
                </button>
              }
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Loading State -->
    @if (loading) {
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Loading events...</p>
      </div>
    } @else if (error) {
      <div class="error-state">
        <svg class="error-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p>{{ error }}</p>
        <button (click)="loadEvents()" class="btn-retry">Try Again</button>
      </div>
    } @else {
      <!-- Events Grid - Minimaliste -->
      @if (filteredEvents.length > 0) {
        <div class="events-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; max-width: 1200px; margin: 0 auto;">
          @for (event of filteredEvents; track event.id) {
            <div class="event-card" (click)="showEventDetails(event)" style="cursor: pointer; display: flex; flex-direction: column; background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: all 0.3s; border: 1px solid #e5e7eb;">
              <!-- Event Image -->
              <div style="position: relative; width: 100%; height: 220px; overflow: hidden; background: linear-gradient(135deg, #2D5757, #3D3D60);">
                @if (event.image) {
                  <img 
                    [src]="event.image" 
                    [alt]="event.title" 
                    loading="lazy"
                    style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s;"
                  />
                } @else {
                  <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 4rem;">
                    {{ getTypeIcon(event.type) }}
                  </div>
                }
                
                <!-- Gradient overlay -->
                <div style="position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);"></div>
                
                <!-- Nom du Club -->
                <div style="position: absolute; bottom: 12px; left: 12px; right: 12px; z-index: 10;">
                  <div style="display: flex; align-items: center; gap: 8px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(8px); border-radius: 8px; padding: 8px 12px;">
                    <div style="width: 28px; height: 28px; border-radius: 6px; background: #2D5757; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                      <span style="font-size: 14px;">ðŸŽ¯</span>
                    </div>
                    <p style="font-size: 12px; font-weight: 700; color: #2D5757; margin: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1;">
                      {{ event.clubName || 'English Flow Club' }}
                    </p>
                  </div>
                </div>
              </div>

              <!-- Event Body -->
              <div style="padding: 16px; display: flex; flex-direction: column; flex: 1;">
                <h3 style="font-size: 16px; font-weight: 700; color: #1f2937; margin: 0 0 12px 0; line-height: 1.4; min-height: 44px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                  {{ event.title }}
                </h3>

                <!-- Bouton DÃ©tail -->
                <button style="width: 100%; padding: 10px 16px; background: linear-gradient(to right, #F6BD60, #e5ac4f); color: #1f2937; border: none; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: auto;">
                  <svg style="width: 16px; height: 16px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                  </svg>
                  View Details
                </button>
              </div>
            </div>
          }
        </div>
      } @else {
        <div class="empty-state">
          <span class="empty-icon">{{ selectedType ? getTypeIcon(selectedType) : 'ðŸ“…' }}</span>
          <h3 class="empty-title">
            @if (selectedType) {
              No {{ getTypeLabel(selectedType) }} events available
            } @else {
              No events available yet
            }
          </h3>
          <p class="empty-description">
            @if (selectedType) {
              Try selecting another type or check back later.
            } @else {
              Check back soon to discover our upcoming events.
            }
          </p>
          @if (selectedType) {
            <button (click)="filterByType(null)" class="btn-view-all">View All Events</button>
          }
        </div>
      }
    }

    <!-- CTA Section -->
    <div class="events-cta">
      <div class="cta-content">
        <h2 class="cta-title">Ready to Participate?</h2>
        <p class="cta-description">Create an account to register for events and enhance your learning experience.</p>
        <div class="cta-buttons">
          <a routerLink="/register" class="btn-cta-primary">Create Account</a>
          <a routerLink="/login" class="btn-cta-secondary">Sign In</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Event Details Modal -->
@if (showDetailsModal && selectedEvent) {
  <div class="modal-overlay" (click)="closeDetailsModal()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <!-- Modal Header -->
      <div class="modal-header">
        <h2 class="modal-title">{{ selectedEvent.title }}</h2>
        <button (click)="closeDetailsModal()" class="modal-close-btn">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <!-- Event Image -->
        @if (selectedEvent.image) {
          <div class="modal-image-container">
            <img [src]="selectedEvent.image" [alt]="selectedEvent.title" class="modal-image" />
          </div>
        } @else {
          <div class="modal-image-placeholder">
            <span class="modal-placeholder-icon">{{ getTypeIcon(selectedEvent.type) }}</span>
          </div>
        }

        <!-- Event Info -->
        <div class="modal-info-section">
          <div class="modal-info-item">
            <h3 class="modal-info-label">
              <svg class="modal-info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
              </svg>
              Type
            </h3>
            <p class="modal-info-value">
              <span class="modal-type-badge">
                {{ getTypeIcon(selectedEvent.type) }} {{ getTypeLabel(selectedEvent.type) }}
              </span>
            </p>
          </div>

          <div class="modal-info-item">
            <h3 class="modal-info-label">
              <svg class="modal-info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
              Date and Time
            </h3>
            <p class="modal-info-value">
              From {{ formatDate(selectedEvent.startDate) }}<br>
              To {{ formatDate(selectedEvent.endDate) }}
            </p>
          </div>

          <div class="modal-info-item">
            <h3 class="modal-info-label">
              <svg class="modal-info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              Location
            </h3>
            <p class="modal-info-value">{{ selectedEvent.location }}</p>
          </div>

          @if (selectedEvent.description) {
            <div class="modal-info-item">
              <h3 class="modal-info-label">
                <svg class="modal-info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
                Description
              </h3>
              <p class="modal-info-value">{{ selectedEvent.description }}</p>
            </div>
          }

          <!-- Gallery Section -->
          @if (selectedEvent.gallery && selectedEvent.gallery.length > 0) {
            <div class="modal-info-item">
              <h3 class="modal-info-label">
                <svg class="modal-info-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                Photo Gallery
              </h3>
              <div class="gallery-grid">
                @for (image of selectedEvent.gallery; track $index) {
                  <div class="gallery-item" (click)="openGalleryImage(image)">
                    <img 
                      [src]="image" 
                      [alt]="'Gallery image ' + ($index + 1)" 
                      class="gallery-image"
                    />
                    <div class="gallery-overlay">
                      <svg class="gallery-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
                      </svg>
                    </div>
                  </div>
                }
              </div>
            </div>
          }
        </div>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer">
        <button (click)="closeDetailsModal()" class="modal-btn-primary" style="width: 100%;">
          Close
        </button>
      </div>
    </div>
  </div>
}

<!-- Gallery Image Lightbox -->
@if (selectedGalleryImage) {
  <div class="lightbox-overlay" (click)="closeGalleryImage()">
    <div class="lightbox-container" (click)="$event.stopPropagation()">
      <button (click)="closeGalleryImage()" class="lightbox-close-btn">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      <img 
        [src]="selectedGalleryImage" 
        alt="Gallery image" 
        class="lightbox-image"
      />
    </div>
  </div>
}
<!-- ***** Events Section End ***** -->

<!-- ***** Footer Start ***** -->
<footer class="modern-footer">
  <div class="footer-container">
    <div class="footer-content">
      <div class="footer-brand">
        <img src="/images/logo/jungle-in-english-removebg-preview.png" alt="Jungle in English" class="footer-logo">
        <p class="footer-description">
          Empowering students to master English through innovative teaching methods and expert guidance.
        </p>
      </div>

      <div class="footer-links">
        <div class="footer-column">
          <h4>Quick Links</h4>
          <ul>
            <li><a routerLink="/">Home</a></li>
            <li><a routerLink="/clubs">Clubs</a></li>
            <li><a routerLink="/events">Events</a></li>
            <li><a routerLink="/register">Join Now</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2026 Jungle in English. All rights reserved.</p>
    </div>
  </div>
</footer>
<!-- ***** Footer End ***** -->
