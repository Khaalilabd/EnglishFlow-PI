<div class="min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-6 space-y-6">
  <!-- Header with Gradient -->
  <div class="bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl shadow-xl p-8 text-white">
    <div class="flex justify-between items-center">
      <div>
        <div class="flex items-center space-x-3 mb-2">
          <div class="bg-white/20 backdrop-blur-sm p-3 rounded-xl">
            <i class="fas fa-chalkboard-teacher text-2xl"></i>
          </div>
          <h1 class="text-4xl font-bold">Pedagogical Complaints</h1>
        </div>
        <p class="text-purple-100 text-lg ml-16">Manage and resolve student pedagogical issues</p>
      </div>
      <button
        (click)="loadComplaints()"
        class="bg-white/20 hover:bg-white/30 backdrop-blur-sm px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 font-semibold">
        <i class="fas fa-sync-alt mr-2"></i>Refresh
      </button>
    </div>
  </div>

  <!-- Enhanced Stats Cards -->
  <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border-t-4 border-gray-500 hover:scale-105">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-1">Total</div>
          <div class="text-3xl font-bold text-gray-900 dark:text-white">{{ stats.total }}</div>
        </div>
        <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded-full">
          <i class="fas fa-list text-gray-600 dark:text-gray-300 text-xl"></i>
        </div>
      </div>
    </div>
    
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border-t-4 border-blue-500 hover:scale-105">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-1">Open</div>
          <div class="text-3xl font-bold text-blue-700 dark:text-blue-300">{{ stats.open }}</div>
        </div>
        <div class="bg-blue-100 dark:bg-blue-900/30 p-3 rounded-full">
          <i class="fas fa-folder-open text-blue-600 dark:text-blue-400 text-xl"></i>
        </div>
      </div>
    </div>
    
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-6 border-t-4 border-teal-500 hover:scale-105">
      <div class="flex items-center justify-between">
        <div>
          <div class="text-sm font-medium text-teal-600 dark:text-teal-400 mb-1">Noted</div>
          <div class="text-3xl font-bold text-teal-700 dark:text-teal-300">{{ stats.noted }}</div>
        </div>
        <div class="bg-teal-100 dark:bg-teal-900/30 p-3 rounded-full">
          <i class="fas fa-eye text-teal-600 dark:text-teal-400 text-xl"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced Filters and Search -->
  <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
    <div class="flex items-center mb-4">
      <i class="fas fa-filter text-purple-600 dark:text-purple-400 text-xl mr-3"></i>
      <h2 class="text-xl font-bold text-gray-900 dark:text-white">Filters & Search</h2>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="relative">
        <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (ngModelChange)="applyFilters()"
          placeholder="Search by student name, email, or subject..."
          class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-800 transition-all">
      </div>
      
      <div class="relative">
        <i class="fas fa-tasks absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        <select
          [(ngModel)]="filterStatus"
          (ngModelChange)="applyFilters()"
          class="w-full pl-12 pr-4 py-3 border-2 border-gray-200 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-purple-500 dark:focus:border-purple-400 focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-800 transition-all appearance-none cursor-pointer">
          <option value="all">All Status</option>
          <option value="OPEN">üîµ Open</option>
          <option value="NOTED">üëÅÔ∏è Noted</option>
          <option value="IN_PROGRESS">‚öôÔ∏è In Progress</option>
          <option value="RESOLVED">‚úÖ Resolved</option>
          <option value="REJECTED">‚ùå Rejected</option>
        </select>
        <i class="fas fa-chevron-down absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"></i>
      </div>
    </div>
    
    <!-- Active Filters Display -->
    <div *ngIf="searchTerm || filterStatus !== 'all'" class="mt-4 flex flex-wrap gap-2">
      <span class="text-sm text-gray-600 dark:text-gray-400 mr-2">Active filters:</span>
      <span *ngIf="searchTerm" class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200">
        <i class="fas fa-search mr-1"></i> "{{ searchTerm }}"
        <button (click)="searchTerm = ''; applyFilters()" class="ml-2 hover:text-purple-600">
          <i class="fas fa-times"></i>
        </button>
      </span>
      <span *ngIf="filterStatus !== 'all'" class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200">
        <i class="fas fa-tasks mr-1"></i> {{ filterStatus }}
        <button (click)="filterStatus = 'all'; applyFilters()" class="ml-2 hover:text-blue-600">
          <i class="fas fa-times"></i>
        </button>
      </span>
    </div>
  </div>

  <!-- Enhanced Complaints Cards -->
  <div class="space-y-4">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-12 text-center">
      <div class="inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-purple-600"></div>
      <p class="text-gray-600 dark:text-gray-400 mt-6 text-lg font-medium">Loading complaints...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && filteredComplaints.length === 0" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-12 text-center">
      <div class="bg-gray-100 dark:bg-gray-700 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6">
        <i class="fas fa-inbox text-5xl text-gray-400 dark:text-gray-500"></i>
      </div>
      <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">No Complaints Found</h3>
      <p class="text-gray-500 dark:text-gray-400 text-lg">There are no pedagogical complaints matching your filters.</p>
    </div>

    <!-- Complaints Grid -->
    <div *ngIf="!isLoading && filteredComplaints.length > 0">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-gray-900 dark:text-white">
          <i class="fas fa-list-ul text-purple-600 dark:text-purple-400 mr-2"></i>
          Showing {{ filteredComplaints.length }} complaint(s)
        </h2>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div *ngFor="let complaint of filteredComplaints" 
             (click)="viewDetails(complaint)"
             class="group bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer overflow-hidden transform hover:-translate-y-1 border-t-4"
             [class.border-red-500]="complaint.priority === 'URGENT'"
             [class.border-orange-500]="complaint.priority === 'HIGH'"
             [class.border-yellow-500]="complaint.priority === 'MEDIUM'"
             [class.border-green-500]="complaint.priority === 'LOW'">
          
          <!-- Card Header with Gradient -->
          <div class="p-5 bg-gradient-to-r from-gray-50 to-white dark:from-gray-700 dark:to-gray-800 border-b border-gray-200 dark:border-gray-600">
            <div class="flex justify-between items-start mb-3">
              <div class="flex items-center space-x-3 flex-1 min-w-0">
                <div class="bg-purple-100 dark:bg-purple-900/30 p-2 rounded-lg flex-shrink-0">
                  <i class="fas fa-user text-purple-600 dark:text-purple-400"></i>
                </div>
                <div class="min-w-0 flex-1">
                  <h3 class="font-bold text-gray-900 dark:text-white text-lg truncate">{{ complaint.username }}</h3>
                  <p class="text-sm text-gray-500 dark:text-gray-400 truncate">{{ complaint.userEmail }}</p>
                </div>
              </div>
              <span [class]="getSeverityBadge(complaint.priority).class" 
                    class="px-3 py-1 text-white text-xs font-bold rounded-full shadow-md flex-shrink-0 ml-2">
                {{ getSeverityBadge(complaint.priority).text }}
              </span>
            </div>
          </div>

          <!-- Card Body -->
          <div class="p-5 space-y-4">
            <div>
              <div class="flex items-start space-x-2 mb-2">
                <i class="fas fa-file-alt text-purple-600 dark:text-purple-400 mt-1 flex-shrink-0"></i>
                <p class="font-semibold text-gray-900 dark:text-white line-clamp-1">{{ complaint.subject }}</p>
              </div>
              <p class="text-sm text-gray-600 dark:text-gray-400 line-clamp-2 pl-6">{{ complaint.description }}</p>
            </div>

            <div class="grid grid-cols-2 gap-3">
              <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3">
                <div class="flex items-center space-x-2 mb-1">
                  <i class="fas fa-tag text-gray-400 text-xs"></i>
                  <span class="text-xs text-gray-500 dark:text-gray-400">Category</span>
                </div>
                <p class="font-semibold text-gray-900 dark:text-white text-sm truncate">{{ complaint.category }}</p>
              </div>
              
              <div class="bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3">
                <div class="flex items-center space-x-2 mb-1">
                  <i class="fas fa-calendar text-gray-400 text-xs"></i>
                  <span class="text-xs text-gray-500 dark:text-gray-400">Date</span>
                </div>
                <p class="font-semibold text-gray-900 dark:text-white text-sm">{{ complaint.createdAt | date:'shortDate' }}</p>
              </div>
            </div>

            <div class="flex items-center justify-between pt-2">
              <span [class]="getStatusClass(complaint.status)" class="px-3 py-1 text-xs font-bold rounded-full">
                {{ complaint.status }}
              </span>
              
              <span [class]="getDaysOpenBadge(complaint.daysSinceCreation).class" 
                    class="px-3 py-1 text-white text-xs font-bold rounded-full shadow-md">
                <i class="fas fa-clock mr-1"></i>
                {{ getDaysOpenBadge(complaint.daysSinceCreation).text }}
              </span>
            </div>
          </div>

          <!-- Card Footer -->
          <div class="px-5 py-4 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-gray-700 dark:to-gray-800 border-t border-gray-200 dark:border-gray-600 flex justify-between items-center">
            <div class="flex items-center space-x-4 text-xs text-gray-600 dark:text-gray-400">
              <span class="flex items-center">
                <i class="fas fa-chart-line mr-1 text-purple-600 dark:text-purple-400"></i>
                Risk: <span class="font-bold ml-1">{{ complaint.riskScore }}</span>
              </span>
            </div>
            <button class="text-purple-600 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-300 font-semibold text-sm group-hover:translate-x-1 transition-transform flex items-center">
              View Details <i class="fas fa-arrow-right ml-2"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>