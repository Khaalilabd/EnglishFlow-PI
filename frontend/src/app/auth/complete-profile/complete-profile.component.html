<div class="complete-profile-container">
  <!-- Success Message -->
  <div *ngIf="success" class="success-overlay">
    <div class="success-card">
      <div class="success-icon">‚úì</div>
      <h2>Profile Completed!</h2>
      <p>Redirecting to dashboard...</p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="profile-card" [class.hidden]="success">
    <div class="header">
      <div class="logo">üå¥</div>
      <h1>Complete Your Profile</h1>
      <p class="welcome">Welcome, {{firstName}} {{lastName}}!</p>
      <p class="subtitle">Please complete your profile to continue</p>
    </div>

    <div class="error-message" *ngIf="error">
      <span class="error-icon">‚ö†Ô∏è</span>
      {{ error }}
    </div>

    <form (ngSubmit)="onSubmit()" class="profile-form">
      <!-- Account Information (Read-only) -->
      <div class="form-section">
        <h3>Account Information</h3>
        <div class="form-group">
          <label>Email</label>
          <input type="email" [value]="email" readonly class="readonly-input">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>First Name</label>
            <input type="text" [value]="firstName" readonly class="readonly-input">
          </div>
          <div class="form-group">
            <label>Last Name</label>
            <input type="text" [value]="lastName" readonly class="readonly-input">
          </div>
        </div>
      </div>

      <!-- Required Information -->
      <div class="form-section">
        <h3>Required Information</h3>
        <div class="form-row">
          <div class="form-group">
            <label>Phone Number <span class="required">*</span></label>
            <input 
              type="tel" 
              [(ngModel)]="profileForm.phone" 
              name="phone"
              placeholder="+212612345678"
              required
              [disabled]="loading">
          </div>
          <div class="form-group">
            <label>CIN <span class="required">*</span></label>
            <input 
              type="text" 
              [(ngModel)]="profileForm.cin" 
              name="cin"
              placeholder="AB123456"
              required
              [disabled]="loading">
          </div>
        </div>
      </div>

      <!-- Additional Information -->
      <div class="form-section">
        <h3>Additional Information (Optional)</h3>
        
        <div class="form-group">
          <label>Date of Birth</label>
          <input 
            type="date" 
            [(ngModel)]="profileForm.dateOfBirth" 
            name="dateOfBirth"
            [disabled]="loading">
        </div>

        <div class="form-group">
          <label>Address</label>
          <textarea 
            [(ngModel)]="profileForm.address" 
            name="address"
            rows="2"
            placeholder="Your address"
            [disabled]="loading"></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>City</label>
            <input 
              type="text" 
              [(ngModel)]="profileForm.city" 
              name="city"
              placeholder="Casablanca"
              [disabled]="loading">
          </div>
          <div class="form-group">
            <label>Postal Code</label>
            <input 
              type="text" 
              [(ngModel)]="profileForm.postalCode" 
              name="postalCode"
              placeholder="20000"
              [disabled]="loading">
          </div>
        </div>

        <div class="form-group">
          <label>English Level</label>
          <select [(ngModel)]="profileForm.englishLevel" name="englishLevel" [disabled]="loading">
            <option value="">Select your level</option>
            <option *ngFor="let level of englishLevels" [value]="level">
              {{ level }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label>Bio (max 500 characters)</label>
          <textarea 
            [(ngModel)]="profileForm.bio" 
            name="bio"
            rows="4"
            maxlength="500"
            placeholder="Tell us about yourself..."
            [disabled]="loading"></textarea>
          <small class="char-count">{{ bioLength }}/500</small>
        </div>
      </div>

      <button 
        type="submit" 
        class="submit-btn"
        [disabled]="loading || !profileForm.phone || !profileForm.cin">
        <span *ngIf="!loading">‚ú® Complete Profile</span>
        <span *ngIf="loading">
          <span class="spinner"></span>
          Saving...
        </span>
      </button>
    </form>
  </div>
</div>
